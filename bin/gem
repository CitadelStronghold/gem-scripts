#!/bin/bash

MODE="$1"
TARGET="$2"

EDITOR="${EDITOR:-vim}"

if [[ "$1" = "" ]]; then
    sudo bash /opt/gem/update.sh || exit 1
    exit 0
fi

if [[ "$1" = "install" ]]; then
    sudo bash /opt/gem/install.sh $TARGET || exit 1
    exit 0
fi

if [[ "$1" = "pac" ]]; then
    sudo bash /opt/gem/pac.sh "${@:2}" || exit 1
    exit 0
fi

if [[ "$1" = "tree" ]]; then
    echo "[gem] [tree]"
    tree /opt/gem/gems || exit 1
    exit 0
fi

if [[ "$1" = "shutdown" ]]; then
    sudo shutdown -h --no-wall now
    exit 0
fi
if [[ "$1" = "reboot" ]]; then
    sudo reboot -h --no-wall
    exit 0
fi

if [[ "$1" = "c" ]]; then
    if [[ "$1" = "hypr" ]]; then
        $EDITOR ~/.config/hypr/hyprland.conf
    else if [[ "$1" = "paper" ]]; then
        $EDITOR ~/.config/hypr/hyprpaper.conf
    else if [[ "$1" = "foot" ]]; then
        $EDITOR ~/.config/foot/foot.ini
    else if [[ "$1" = "rofi" ]]; then
        $EDITOR ~/.config/rofi/config.rasi
    fi

    exit 0
fi

bash /opt/gem/gems/$TARGET $MODE || exit 1